
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íŒŒë¼ì˜¤ ì½”ë“œ - ì†”ë¡œ ëª¨ë“œ</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fdf6e3; padding: 20px; }
    h1 { text-align: center; color: #c19a6b; }
    .section { text-align: center; margin: 20px 0; }
    button { padding: 10px 20px; font-size: 16px; }
    input[type="text"] { font-size: 16px; padding: 5px; width: 300px; }
    .tile {
      display: inline-block; width: 80px; height: 80px; margin: 5px;
      line-height: 80px; font-size: 24px; font-weight: bold;
      border-radius: 8px; color: white;
    }
    .yellow { background: #f1c40f; }
    .blue { background: #3498db; }
    .red { background: #e74c3c; }
    .black { background: #2c3e50; }
    .score { font-size: 20px; margin-top: 10px; }
    .legend-item { display: inline-block; margin: 0 10px; font-size: 16px; }
    .legend-color { display: inline-block; width: 15px; height: 15px; border-radius: 3px; vertical-align: middle; margin-right: 5px; }
    .instructions {
      background: #fffaf0;
      border: 1px solid #e0dccc;
      padding: 15px;
      border-radius: 10px;
      max-width: 700px;
      margin: 0 auto 20px;
      font-size: 16px;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>ğŸ² íŒŒë¼ì˜¤ ì½”ë“œ - ì†”ë¡œ ëª¨ë“œ ğŸ²</h1>

  <div class="instructions">
    <strong>ê²Œì„ ë°©ë²•:</strong><br>
    1. "ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°" ë²„íŠ¼ì„ ëˆŒëŸ¬ 3ê°œì˜ ì£¼ì‚¬ìœ„ë¥¼ êµ´ë¦½ë‹ˆë‹¤.<br>
    2. ì£¼ì‚¬ìœ„ì—ì„œ ë‚˜ì˜¨ ìˆ«ì 3ê°œ ì¤‘ 2ê°œ ì´ìƒì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ì¹™ì—°ì‚° ìˆ˜ì‹ì„ ë§Œë“­ë‹ˆë‹¤.<br>
    3. ìˆ˜ì‹ ê²°ê³¼ê°€ í™”ë©´ì˜ íƒ€ì¼ ìˆ«ì ì¤‘ í•˜ë‚˜ì™€ ì •í™•íˆ ì¼ì¹˜í•˜ë©´ í•´ë‹¹ ë‚œì´ë„ì— ë”°ë¼ ì ìˆ˜ë¥¼ íšë“í•©ë‹ˆë‹¤.<br>
    4. ìˆ˜ì‹ì€ ê´„í˜¸ë¥¼ ì‚¬ìš©í•´ë„ ë˜ë©°, ìˆ«ìëŠ” í•œ ë²ˆì”©ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    5. ì¼ì¹˜í•˜ëŠ” íƒ€ì¼ì´ ì—†ê±°ë‚˜ ìˆ˜ì‹ì´ í‹€ë¦¬ë©´ -1ì  ê°ì ë©ë‹ˆë‹¤.<br>
    6. ê°€ëŠ¥í•œ ë†’ì€ ì ìˆ˜ë¥¼ ëª©í‘œë¡œ ë„ì „í•´ë³´ì„¸ìš”!
  </div>

  <div class="section legend">
    <div class="legend-item"><span class="legend-color yellow"></span>ë…¸ë‘ íƒ€ì¼ = 1ì </div>
    <div class="legend-item"><span class="legend-color blue"></span>íŒŒë‘ íƒ€ì¼ = 2ì </div>
    <div class="legend-item"><span class="legend-color red"></span>ë¹¨ê°• íƒ€ì¼ = 3ì </div>
    <div class="legend-item"><span class="legend-color black"></span>ê²€ì • íƒ€ì¼ = 4ì </div>
  </div>

  <div class="section dice">
    <button onclick="rollDice()">ğŸ² ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    <div id="diceResult" style="font-size: 28px; font-weight: bold;">ì£¼ì‚¬ìœ„ ê²°ê³¼: -</div>
  </div>

  <div class="section tiles" id="tileContainer">
    <!-- íƒ€ì¼ í‘œì‹œ ì˜ì—­ -->
  </div>

  <div class="section">
    <input type="text" id="expression" placeholder="ì˜ˆ: (5-2)*11">
    <button onclick="submitAnswer()">ìˆ˜ì‹ í™•ì¸</button>
  </div>

  <div id="message" class="section" style="font-size: 18px;"></div>

  <div class="section scoreboard">
    <div class="score" id="scoreDisplay">ì ìˆ˜: 0</div>
  </div>

  <script>
    let dice = [];
    let score = 0;
    let tiles = [];

    function rollDice() {
      dice = [roll(8), roll(10), roll(12)];
      document.getElementById("diceResult").innerText = "ì£¼ì‚¬ìœ„ ê²°ê³¼: " + dice.join(", ");
      document.getElementById("message").innerText = "";
      document.getElementById("expression").value = "";
      generateTiles();
    }

    function roll(sides) {
      return Math.floor(Math.random() * sides) + 1;
    }

    function generateTiles() {
      const container = document.getElementById("tileContainer");
      container.innerHTML = "";
      tiles = [];
      const difficulties = ["yellow", "blue", "red", "black"];
      for (let i = 0; i < 8; i++) {
        const value = Math.floor(Math.random() * 50) + 1;
        const difficulty = difficulties[Math.floor(i / 2)];
        const tile = { value, difficulty };
        tiles.push(tile);
        const div = document.createElement("div");
        div.className = `tile ${difficulty}`;
        div.innerText = value;
        div.setAttribute("data-value", value);
        container.appendChild(div);
      }
    }

    function submitAnswer() {
      const expr = document.getElementById("expression").value;
      if (!expr) {
        alert("ìˆ˜ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      try {
        const usedNumbers = dice.map(String);
        const exprUsed = expr.match(/\d+/g) || [];
        const isValid = exprUsed.every(num => usedNumbers.includes(num));

        if (!isValid) {
          document.getElementById("message").innerText = "âŒ ì£¼ì‚¬ìœ„ ìˆ«ìë§Œ ì‚¬ìš©í•´ì•¼ í•´ìš”!";
          return;
        }

        const result = eval(expr);
        const match = tiles.find(t => t.value === result);

        if (match) {
          const bonus = { yellow: 1, blue: 2, red: 3, black: 4 }[match.difficulty];
          score += bonus;
          document.getElementById("message").innerText = `âœ… ${result} ì¼ì¹˜! +${bonus}ì `;
        } else {
          score -= 1;
          document.getElementById("message").innerText = `âŒ ì¼ì¹˜í•˜ëŠ” íƒ€ì¼ ì—†ìŒ. -1ì `;
        }

        updateScore();
      } catch {
        document.getElementById("message").innerText = "âŒ ì˜ëª»ëœ ìˆ˜ì‹ì…ë‹ˆë‹¤.";
      }
    }

    function updateScore() {
      document.getElementById("scoreDisplay").innerText = `ì ìˆ˜: ${score}`;
    }

    rollDice(); // ì‹œì‘ ì‹œ ìë™ ì£¼ì‚¬ìœ„ êµ´ë¦¼
  </script>
</body>
</html>
